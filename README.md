# Big_Data_AWS

Analyzing Amazon reviews via ETL process using PySpark

## Purpose

* **Define big data and describe the challenges associated with it.**
* **Define Hadoop and name the main elements of its ecosystem.**
* **Explain how MapReduce processes data.**
* **Define Spark and explain how it processes data.**
* **Describe how NLP collects and analyzes text data.**
* **Explain how to use AWS Simple Storage Service (S3) and relational databases for basic cloud storage.**
* **Complete an analysis of an Amazon customer review.**

## Overview

SellBy, a company pays a small fee to Amazon and provide products to Amazon Vine members who are then required to publish a review. Amazon Vine program is a service that allows manufacturers and publishers to receive reivews for their products. We are tasked to analyze Amazon reviews written by members of the paid Amazon Vine program. For this analysis we have selected Toys category. 

Data has been collected from: https://s3.amazonaws.com/amazon-reviews-pds/tsv/amazon_reviews_us_Toys_v1_00.tsv.gz. The data will be processed in Google Colaboratory using PySpark. Data will undergo detailed ETL process and loaded in PostgresSQL using Amazon's AWS RDS database.

## Analysis

### Initial Dataframe

The initial database for the toys category from Amazon Vine reviews looks like the following which has 4864249 rows. 

![main_df](https://user-images.githubusercontent.com/108366412/197099998-ab46d777-6b18-4b41-b0ac-c42a6d259baf.png)

### Customers Dataframe

Customers were grouped by and aggregated by customer id to show only the unique customer for each row. Below dataframe shows the first 20 rows of the 2561107 unique customer ids.
![customers_df](https://user-images.githubusercontent.com/108366412/197100271-2a3e6f6a-9f8b-4927-acf4-ec345142e01b.png)

### Products Dataframe

Products dataframe was generated by removing all duplicate entries of product_id column to show a single entry for each product which comes to 664062 unique products in the dataframe.
![products_df](https://user-images.githubusercontent.com/108366412/197101274-6999ceed-d8e7-4438-b75e-38a3011b06aa.png)

### Review ID Dataframe
Below image shows a screenshot of reviews_id dataframe which is generated by selecting "review_id", "customer_id", "product_id", "product_parent" and " to_date" column with all 4864249 rows.

![review_id_df](https://user-images.githubusercontent.com/108366412/197101473-982240f4-0337-4b70-ad9c-114e4aecaba4.png)

### Vine Dataframe
The initial Vine Dataframe was generated with selecting "review_id", "star_rating", "helpful_votes", "total_votes", "vine", and "verified_purchase" columns with 4864249 rows. 
![vine_df](https://user-images.githubusercontent.com/108366412/197101487-d2f6ebdf-6818-4a32-93a7-2d3e98a00b7d.png)

### Dataframe with Reviews more than 20 votes

In order to pick helpful votes in our study, the vine dataframe was filtered to pick only those reviews which has a vote count of 20 or more. Below is the image of filtered dataframe

![total_votes](https://user-images.githubusercontent.com/108366412/197102374-507e2789-38f8-4f83-a3a0-d60fb4ad6857.png)

### Dataframe with Helpful votes greater than or equal to 50% of total votes

Filtering the data with helpful votes helped in emphasizing importance of reviews whether it is paid or unpaid through the vine program

![helpful_votes_filter](https://user-images.githubusercontent.com/108366412/197103189-25911db2-41b3-42cf-a699-1182fc1b8d96.png)

### Paid reviews through vine program dataframe
There are a total of 1266 reviews which are paid under the vine paid review program.
![vine_paid_reviews](https://user-images.githubusercontent.com/108366412/197103332-d8139bd5-38d3-4ca9-98a0-ee02798e68f8.png)

### Unpaid reviews dataframe
There are a total of 62028 reviews which are unpaid. No incentive has been offered for these reviews.

![vine_unpaid_review](https://user-images.githubusercontent.com/108366412/197103342-026e6c33-0ce0-4ae1-812f-b81daf023d8d.png)

## Results

* **How many Vine reviews and non-Vine reviews were there?**
  Total of 1266 reviews are paid under the vine paid review program whereas 62028 reviews are unpaid.
  
* **How many Vine reviews were 5 stars? How many non-Vine reviews were 5 stars?**
  The total number of vine reviews with 5 star rating is only 432 whereas the count with unpaid reviews is 29982. 

* **What percentage of Vine reviews were 5 stars? What percentage of non-Vine reviews were 5 stars?**
  Out of the total vine reviews, 34.12% are having a 5-star rating whereas, with 48.34% of unpaid reviews are having 5-star rating

Below screenshot will provide a clear distinction between paid and unpaid reviews along with the code
![results](https://user-images.githubusercontent.com/108366412/197098814-67e1fd47-592c-4807-ae6f-7a1e1490ed36.png)

## Summary

Through detailed analysis of data on paid and unpaid reviews, it can be concluded that haivng a vine program does not have any positivity bias in the reviews received. It is seen that the unpaid reviews (62028) are much more in number as against paid reviews(1266). Further only 432 reviews had a 5-star rating which is 34.12% of paid reviews as against 29982 reviews for unpaid category which is 48.34%. Looking at the percentages, it is evident that for a product to get positive reviews with 5-star rating, vine paid review program will not make much of a difference.

An additional analysis can be done with vine dataframe to check if there is any bias if a puchase is a verified purchase or not. We can filter the data with verified purchase and check if the percentages for 5-star ratings change or remain the same.  
